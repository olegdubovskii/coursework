{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Oleg\\\\Desktop\\\\coursework\\\\client\\\\src\\\\components\\\\Cabinet\\\\EditArticle\\\\EditArticle.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport styles from './styles/editArticleStyles.module.css';\nimport { Link, useLocation } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst EditArticle = _ref => {\n  _s();\n  let {\n    navigate\n  } = _ref;\n  const location = useLocation();\n  const user = location.state.user;\n  const article = location.state.article;\n  const [titleInput, setTitleInput] = useState(article.title);\n  const [contentInput, setContentInput] = useState(article.content);\n  const onSubmit = async e => {\n    e.preventDefault();\n    const form = e.target;\n    if (form.elements['file'].files[0]) {\n      const formData = new FormData();\n      formData.append('image', form.elements['file'].files[0]);\n      const responseLink = await fetch(`http://localhost:3030/api/v1/image`, {\n        // headers: {\n        //     'Authorization': `Bearer ${localStorage.getItem('accessToken')}`\n        // },\n        method: 'POST',\n        body: formData\n      }).then(res => res.json());\n      article.imagelink = responseLink;\n    }\n    const editedArticle = {\n      title: titleInput,\n      content: contentInput,\n      user_id: user.id,\n      dueTo: new Date(),\n      user_name: user.nickname,\n      imageLink: article.imagelink\n    };\n    const responseEditedArticle = await fetch(`http://localhost:3030/api/v1/users/${user.id}/${article.id}`, {\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      method: 'PUT',\n      body: JSON.stringify(newArticle)\n    });\n    if (responseNewArticle.status === 200) {\n      navigate('/cabinet');\n    } else if (responseNewArticle.status === 404) {\n      alert('something wrong');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(\"nav\", {\n      className: styles.nav_bar,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\u0410\\u0432\\u0442\\u043E\\u043C\\u043E\\u0431\\u0438\\u043B\\u044C\\u043D\\u044B\\u0439 \\u0431\\u043B\\u043E\\u0433\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/cabinet\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: styles.nav_btn,\n          children: [\" \", \"<\", \" \\u0412 \\u043B\\u0438\\u0447\\u043D\\u044B\\u0439 \\u043A\\u0430\\u0431\\u0438\\u043D\\u0435\\u0442\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 14\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: styles.form,\n      onSubmit: onSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"\\u0417\\u0430\\u0433\\u043E\\u043B\\u043E\\u0432\\u043E\\u043A\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: styles.input,\n        type: \"text\",\n        id: \"title\",\n        name: \"title\",\n        value: titleInput,\n        onChange: e => setTitleInput(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"\\u0421\\u043E\\u0434\\u0435\\u0440\\u0436\\u0430\\u043D\\u0438\\u0435\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        className: styles.input_text,\n        id: \"content\",\n        name: \"content\",\n        value: contentInput,\n        onChange: e => setContentInput(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.small_inputs,\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          className: styles.input_small,\n          type: \"file\",\n          id: \"file\",\n          name: \"file\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: styles.nav_btn,\n        type: \"submit\",\n        children: \"\\u041E\\u043F\\u0443\\u0431\\u043B\\u0438\\u043A\\u043E\\u0432\\u0430\\u0442\\u044C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 9\n  }, this);\n};\n_s(EditArticle, \"jv0MKvdfTraYur+cnwNtaj+KWsg=\", false, function () {\n  return [useLocation];\n});\n_c = EditArticle;\nexport default EditArticle;\nvar _c;\n$RefreshReg$(_c, \"EditArticle\");","map":{"version":3,"names":["React","useState","styles","Link","useLocation","jsxDEV","_jsxDEV","EditArticle","_ref","_s","navigate","location","user","state","article","titleInput","setTitleInput","title","contentInput","setContentInput","content","onSubmit","e","preventDefault","form","target","elements","files","formData","FormData","append","responseLink","fetch","method","body","then","res","json","imagelink","editedArticle","user_id","id","dueTo","Date","user_name","nickname","imageLink","responseEditedArticle","headers","JSON","stringify","newArticle","responseNewArticle","status","alert","className","container","children","nav_bar","fileName","_jsxFileName","lineNumber","columnNumber","to","nav_btn","input","type","name","value","onChange","input_text","small_inputs","input_small","_c","$RefreshReg$"],"sources":["C:/Users/Oleg/Desktop/coursework/client/src/components/Cabinet/EditArticle/EditArticle.jsx"],"sourcesContent":["import React, {useState} from \"react\";\r\nimport styles from './styles/editArticleStyles.module.css'\r\nimport { Link, useLocation } from 'react-router-dom';\r\n\r\nconst EditArticle = ({navigate}) => {\r\n    const location = useLocation();\r\n    const user = location.state.user;\r\n    const article = location.state.article;\r\n\r\n\r\n    const [titleInput, setTitleInput] = useState(article.title);\r\n    const [contentInput, setContentInput] = useState(article.content);\r\n\r\n    const onSubmit = async (e) => {\r\n        e.preventDefault();\r\n        const form = e.target;\r\n        \r\n        if (form.elements['file'].files[0]) {\r\n            const formData = new FormData();\r\n            formData.append('image', form.elements['file'].files[0]);\r\n            const responseLink = await fetch(`http://localhost:3030/api/v1/image`, {\r\n                // headers: {\r\n                //     'Authorization': `Bearer ${localStorage.getItem('accessToken')}`\r\n                // },\r\n                method:'POST',\r\n                body: formData,\r\n            }).then(res => res.json());\r\n            article.imagelink = responseLink;\r\n        }\r\n\r\n        \r\n        const editedArticle = {\r\n            title: titleInput,\r\n            content: contentInput,\r\n            user_id: user.id,\r\n            dueTo: new Date(),\r\n            user_name: user.nickname,\r\n            imageLink: article.imagelink\r\n        };\r\n\r\n        const responseEditedArticle = await fetch(`http://localhost:3030/api/v1/users/${user.id}/${article.id}`, {\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            method:'PUT',\r\n            body: JSON.stringify(newArticle),\r\n        }); \r\n        if (responseNewArticle.status === 200) {\r\n            navigate('/cabinet');\r\n        } else if (responseNewArticle.status === 404) {\r\n            alert('something wrong');\r\n        }\r\n    }\r\n    return(\r\n        <div className={styles.container}>\r\n             <nav className={styles.nav_bar}>\r\n                <h1>Автомобильный блог</h1>\r\n                <Link to='/cabinet'>\r\n                    <button className={styles.nav_btn}> {\"<\"} В личный кабинет</button>\r\n                </Link>\r\n            </nav> \r\n            <form className={styles.form} onSubmit={onSubmit}> \r\n                <label>Заголовок</label> \r\n                <input className={styles.input} type=\"text\" id=\"title\" name=\"title\" value={titleInput} onChange={e => setTitleInput(e.target.value)}/> \r\n                \r\n                <label>Содержание</label> \r\n                <textarea className={styles.input_text} id=\"content\" name=\"content\" value={contentInput} onChange={e => setContentInput(e.target.value)}></textarea> \r\n                <div className={styles.small_inputs}>\r\n                    <input className={styles.input_small} type=\"file\"  id=\"file\" name=\"file\"/>\r\n                </div>\r\n         \r\n                <button  className={styles.nav_btn} type=\"submit\">Опубликовать</button> \r\n            </form> \r\n        </div>\r\n    );\r\n}\r\n\r\nexport default EditArticle;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}