{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Oleg\\\\Desktop\\\\coursework\\\\client\\\\src\\\\components\\\\Cabinet\\\\CreateArticle\\\\CreateArticle.jsx\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport styles from './styles/createArticleStyles.module.css';\nimport { Link, useLocation } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CreateArticle = _ref => {\n  _s();\n  let {\n    navigate\n  } = _ref;\n  const location = useLocation();\n  const user = location.state;\n  const onSubmit = async e => {\n    e.preventDefault();\n    const form = e.target;\n    const formData = new FormData();\n    formData.append('image', form.elements['file'].files[0]);\n    const responseLink = await fetch(`http://localhost:3030/api/v1/image`, {\n      // headers: {\n      //     'Authorization': `Bearer ${localStorage.getItem('accessToken')}`\n      // },\n      method: 'POST',\n      body: formData\n    }).then(res => res.json());\n    const newArticle = {\n      title: form.elements['title'].value,\n      content: form.elements['content'].value,\n      user_id: user.id,\n      dueTo: new Date(),\n      user_name: user.nickname,\n      imageLink: responseLink\n    };\n    const responseNewArticle = await fetch(`http://localhost:3030/api/v1/users/${user.id}/articles/newArticle`, {\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      method: 'POST',\n      body: JSON.stringify(newArticle)\n    });\n    if (responseNewArticle.status === 200) {\n      navigate('/cabinet');\n    } else if (responseNewArticle.status === 404) {\n      alert('something wrong');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(\"nav\", {\n      className: styles.nav_bar,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\u0410\\u0432\\u0442\\u043E\\u043C\\u043E\\u0431\\u0438\\u043B\\u044C\\u043D\\u044B\\u0439 \\u0431\\u043B\\u043E\\u0433\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/cabinet\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: styles.nav_btn,\n          children: [\" \", \"<\", \" \\u0412 \\u043B\\u0438\\u0447\\u043D\\u044B\\u0439 \\u043A\\u0430\\u0431\\u0438\\u043D\\u0435\\u0442\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 14\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: styles.form,\n      onSubmit: onSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"\\u0417\\u0430\\u0433\\u043E\\u043B\\u043E\\u0432\\u043E\\u043A\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: styles.input,\n        type: \"text\",\n        id: \"title\",\n        name: \"title\",\n        placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0437\\u0430\\u0433\\u043E\\u043B\\u043E\\u0432\\u043E\\u043A \\u0441\\u0442\\u0430\\u0442\\u044C\\u0438\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"\\u0421\\u043E\\u0434\\u0435\\u0440\\u0436\\u0430\\u043D\\u0438\\u0435\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        className: styles.input_text,\n        id: \"content\",\n        name: \"content\",\n        placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0441\\u043E\\u0434\\u0435\\u0440\\u0436\\u0430\\u043D\\u0438\\u0435 \\u0441\\u0442\\u0430\\u0442\\u044C\\u0438\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.small_inputs,\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          className: styles.input_small,\n          type: \"file\",\n          id: \"file\",\n          name: \"file\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: styles.nav_btn,\n        type: \"submit\",\n        children: \"\\u041E\\u043F\\u0443\\u0431\\u043B\\u0438\\u043A\\u043E\\u0432\\u0430\\u0442\\u044C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 9\n  }, this);\n};\n_s(CreateArticle, \"pkHmaVRPskBaU4tMJuJJpV42k1I=\", false, function () {\n  return [useLocation];\n});\n_c = CreateArticle;\nexport default CreateArticle;\nvar _c;\n$RefreshReg$(_c, \"CreateArticle\");","map":{"version":3,"names":["React","styles","Link","useLocation","jsxDEV","_jsxDEV","CreateArticle","_ref","_s","navigate","location","user","state","onSubmit","e","preventDefault","form","target","formData","FormData","append","elements","files","responseLink","fetch","method","body","then","res","json","newArticle","title","value","content","user_id","id","dueTo","Date","user_name","nickname","imageLink","responseNewArticle","headers","JSON","stringify","status","alert","className","container","children","nav_bar","fileName","_jsxFileName","lineNumber","columnNumber","to","nav_btn","input","type","name","placeholder","input_text","small_inputs","input_small","_c","$RefreshReg$"],"sources":["C:/Users/Oleg/Desktop/coursework/client/src/components/Cabinet/CreateArticle/CreateArticle.jsx"],"sourcesContent":["import React from \"react\";\nimport styles from './styles/createArticleStyles.module.css'\nimport { Link, useLocation } from 'react-router-dom';\n\nconst CreateArticle = ({navigate}) => {\n    const location = useLocation();\n    const user = location.state;\n\n    const onSubmit = async (e) => {\n        e.preventDefault();\n        const form = e.target;\n        const formData = new FormData();\n        formData.append('image', form.elements['file'].files[0]);\n        const responseLink = await fetch(`http://localhost:3030/api/v1/image`, {\n            // headers: {\n            //     'Authorization': `Bearer ${localStorage.getItem('accessToken')}`\n            // },\n            method:'POST',\n            body: formData,\n        }).then(res => res.json());\n\n        \n        const newArticle = {\n            title: form.elements['title'].value,\n            content: form.elements['content'].value,\n            user_id: user.id,\n            dueTo: new Date(),\n            user_name: user.nickname,\n            imageLink: responseLink\n        };\n\n        const responseNewArticle = await fetch(`http://localhost:3030/api/v1/users/${user.id}/articles/newArticle`, {\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            method:'POST',\n            body: JSON.stringify(newArticle),\n        }); \n        if (responseNewArticle.status === 200) {\n            navigate('/cabinet');\n        } else if (responseNewArticle.status === 404) {\n            alert('something wrong');\n        }\n    }\n    return(\n        <div className={styles.container}>\n             <nav className={styles.nav_bar}>\n                <h1>Автомобильный блог</h1>\n                <Link to='/cabinet'>\n                    <button className={styles.nav_btn}> {\"<\"} В личный кабинет</button>\n                </Link>\n            </nav> \n            <form className={styles.form} onSubmit={onSubmit}> \n                <label>Заголовок</label> \n                <input className={styles.input} type=\"text\" id=\"title\" name=\"title\" placeholder=\"Введите заголовок статьи\"/> \n                \n                <label>Содержание</label> \n                <textarea className={styles.input_text} id=\"content\" name=\"content\" placeholder=\"Введите содержание статьи\"></textarea> \n                <div className={styles.small_inputs}>\n                    <input className={styles.input_small} type=\"file\"  id=\"file\" name=\"file\"/>\n                </div>\n         \n                <button  className={styles.nav_btn} type=\"submit\">Опубликовать</button> \n            </form> \n        </div>\n    );\n}\n\nexport default CreateArticle;"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,MAAM,MAAM,yCAAyC;AAC5D,SAASC,IAAI,EAAEC,WAAW,QAAQ,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAErD,MAAMC,aAAa,GAAGC,IAAA,IAAgB;EAAAC,EAAA;EAAA,IAAf;IAACC;EAAQ,CAAC,GAAAF,IAAA;EAC7B,MAAMG,QAAQ,GAAGP,WAAW,EAAE;EAC9B,MAAMQ,IAAI,GAAGD,QAAQ,CAACE,KAAK;EAE3B,MAAMC,QAAQ,GAAG,MAAOC,CAAC,IAAK;IAC1BA,CAAC,CAACC,cAAc,EAAE;IAClB,MAAMC,IAAI,GAAGF,CAAC,CAACG,MAAM;IACrB,MAAMC,QAAQ,GAAG,IAAIC,QAAQ,EAAE;IAC/BD,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAEJ,IAAI,CAACK,QAAQ,CAAC,MAAM,CAAC,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC;IACxD,MAAMC,YAAY,GAAG,MAAMC,KAAK,CAAE,oCAAmC,EAAE;MACnE;MACA;MACA;MACAC,MAAM,EAAC,MAAM;MACbC,IAAI,EAAER;IACV,CAAC,CAAC,CAACS,IAAI,CAACC,GAAG,IAAIA,GAAG,CAACC,IAAI,EAAE,CAAC;IAG1B,MAAMC,UAAU,GAAG;MACfC,KAAK,EAAEf,IAAI,CAACK,QAAQ,CAAC,OAAO,CAAC,CAACW,KAAK;MACnCC,OAAO,EAAEjB,IAAI,CAACK,QAAQ,CAAC,SAAS,CAAC,CAACW,KAAK;MACvCE,OAAO,EAAEvB,IAAI,CAACwB,EAAE;MAChBC,KAAK,EAAE,IAAIC,IAAI,EAAE;MACjBC,SAAS,EAAE3B,IAAI,CAAC4B,QAAQ;MACxBC,SAAS,EAAEjB;IACf,CAAC;IAED,MAAMkB,kBAAkB,GAAG,MAAMjB,KAAK,CAAE,sCAAqCb,IAAI,CAACwB,EAAG,sBAAqB,EAAE;MACxGO,OAAO,EAAE;QACL,cAAc,EAAE;MACpB,CAAC;MACDjB,MAAM,EAAC,MAAM;MACbC,IAAI,EAAEiB,IAAI,CAACC,SAAS,CAACd,UAAU;IACnC,CAAC,CAAC;IACF,IAAIW,kBAAkB,CAACI,MAAM,KAAK,GAAG,EAAE;MACnCpC,QAAQ,CAAC,UAAU,CAAC;IACxB,CAAC,MAAM,IAAIgC,kBAAkB,CAACI,MAAM,KAAK,GAAG,EAAE;MAC1CC,KAAK,CAAC,iBAAiB,CAAC;IAC5B;EACJ,CAAC;EACD,oBACIzC,OAAA;IAAK0C,SAAS,EAAE9C,MAAM,CAAC+C,SAAU;IAAAC,QAAA,gBAC5B5C,OAAA;MAAK0C,SAAS,EAAE9C,MAAM,CAACiD,OAAQ;MAAAD,QAAA,gBAC5B5C,OAAA;QAAA4C,QAAA,EAAI;MAAkB;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QAAK,eAC3BjD,OAAA,CAACH,IAAI;QAACqD,EAAE,EAAC,UAAU;QAAAN,QAAA,eACf5C,OAAA;UAAQ0C,SAAS,EAAE9C,MAAM,CAACuD,OAAQ;UAAAP,QAAA,GAAC,GAAC,EAAC,GAAG,EAAC,yFAAiB;QAAA;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA;MAAS;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QAChE;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QACL,eACNjD,OAAA;MAAM0C,SAAS,EAAE9C,MAAM,CAACe,IAAK;MAACH,QAAQ,EAAEA,QAAS;MAAAoC,QAAA,gBAC7C5C,OAAA;QAAA4C,QAAA,EAAO;MAAS;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QAAQ,eACxBjD,OAAA;QAAO0C,SAAS,EAAE9C,MAAM,CAACwD,KAAM;QAACC,IAAI,EAAC,MAAM;QAACvB,EAAE,EAAC,OAAO;QAACwB,IAAI,EAAC,OAAO;QAACC,WAAW,EAAC;MAA0B;QAAAT,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QAAE,eAE5GjD,OAAA;QAAA4C,QAAA,EAAO;MAAU;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QAAQ,eACzBjD,OAAA;QAAU0C,SAAS,EAAE9C,MAAM,CAAC4D,UAAW;QAAC1B,EAAE,EAAC,SAAS;QAACwB,IAAI,EAAC,SAAS;QAACC,WAAW,EAAC;MAA2B;QAAAT,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QAAY,eACvHjD,OAAA;QAAK0C,SAAS,EAAE9C,MAAM,CAAC6D,YAAa;QAAAb,QAAA,eAChC5C,OAAA;UAAO0C,SAAS,EAAE9C,MAAM,CAAC8D,WAAY;UAACL,IAAI,EAAC,MAAM;UAAEvB,EAAE,EAAC,MAAM;UAACwB,IAAI,EAAC;QAAM;UAAAR,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA;MAAE;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QACxE,eAENjD,OAAA;QAAS0C,SAAS,EAAE9C,MAAM,CAACuD,OAAQ;QAACE,IAAI,EAAC,QAAQ;QAAAT,QAAA,EAAC;MAAY;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QAAS;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QACpE;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,QACL;AAEd,CAAC;AAAA9C,EAAA,CA9DKF,aAAa;EAAA,QACEH,WAAW;AAAA;AAAA6D,EAAA,GAD1B1D,aAAa;AAgEnB,eAAeA,aAAa;AAAC,IAAA0D,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}